(function(){"use strict";var e={8396:function(e,t,a){var r=a(5130),l=a(6768),n=a(4232);const c={id:"app",class:"container mt-5"},o={class:"row"},s={class:"col-md-8"},i={class:"table-responsive"},d={class:"table table-striped table-bordered table-hover"},u={class:"pagination mt-4"},p={"aria-label":"Page navigation"},v={class:"pagination"},k=["onClick"],g={class:"col-md-4"},h={class:"analytics mt-4"},m={class:"row"},L={key:0,class:"col-md-12 mb-3"},f={class:"card"},b={class:"card-body"},y={class:"card-text"},C={class:"col-md-12 mb-3"},_={class:"card"},x={class:"card-body"},O={class:"card-text"},P={class:"col-md-12 mb-3"},D={class:"card"},E={class:"card-body"},w={class:"card-text"},A={class:""};function S(e,t,a,S,$,M){const T=(0,l.g2)("CO2Chart");return(0,l.uX)(),(0,l.CE)("div",c,[t[8]||(t[8]=(0,l.Lk)("h1",{class:"text-center mb-4"},"3 Sheldon Square Building",-1)),(0,l.Lk)("div",o,[(0,l.Lk)("div",s,[(0,l.Lk)("div",i,[(0,l.Lk)("table",d,[t[2]||(t[2]=(0,l.Lk)("thead",{class:"thead-dark"},[(0,l.Lk)("tr",null,[(0,l.Lk)("th",{scope:"col"},"#"),(0,l.Lk)("th",{scope:"col"},"ATTEC ID"),(0,l.Lk)("th",{scope:"col"},"Lora Address"),(0,l.Lk)("th",{scope:"col"},"Occupancy"),(0,l.Lk)("th",{scope:"col"},"Temp (°C)"),(0,l.Lk)("th",{scope:"col"},"Noise (dB)"),(0,l.Lk)("th",{scope:"col"},"CO2 (ppm)"),(0,l.Lk)("th",{scope:"col"},"AQ 1"),(0,l.Lk)("th",{scope:"col"},"AQ 2"),(0,l.Lk)("th",{scope:"col"},"Humidity (%)"),(0,l.Lk)("th",{scope:"col"},"Pressure (hPa)"),(0,l.Lk)("th",{scope:"col"},"Lux"),(0,l.Lk)("th",{scope:"col"},"Bearing (°)"),(0,l.Lk)("th",{scope:"col"},"Time (YYYY-MM-DD HH:mm:ss)"),(0,l.Lk)("th",{scope:"col"},"Device UUID"),(0,l.Lk)("th",{scope:"col"},"Host MCU"),(0,l.Lk)("th",{scope:"col"},"Lora MCU"),(0,l.Lk)("th",{scope:"col"},"EeDsp")])],-1)),(0,l.Lk)("tbody",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S.paginatedData,((e,t)=>((0,l.uX)(),(0,l.CE)("tr",{key:e.id},[(0,l.Lk)("td",null,(0,n.v_)((S.currentPage-1)*S.itemsPerPage+t+1),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.ateccid),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.physicalsensorid),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.occupancy),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.temperature),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.noise),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.co2),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.aqi1),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.aqi2),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.humid),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.pressure),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.lux),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.bearing),1),(0,l.Lk)("td",null,(0,n.v_)(S.formatDate(e.updated)),1),(0,l.Lk)("td",null,(0,n.v_)(e.detail.deviceid),1),(0,l.Lk)("td",null,(0,n.v_)(e.deviceCache?.shadow_event_document_json?.current?.state?.reported?.softwareRevision?.hostMcu),1),(0,l.Lk)("td",null,(0,n.v_)(e.deviceCache?.shadow_event_document_json?.current?.state?.reported?.softwareRevision?.loraMcu),1),(0,l.Lk)("td",null,(0,n.v_)(e.deviceCache?.shadow_event_document_json?.current?.state?.reported?.softwareRevision?.eeDsp),1)])))),128))])])]),(0,l.Lk)("div",u,[(0,l.Lk)("nav",p,[(0,l.Lk)("ul",v,[(0,l.Lk)("li",{class:(0,n.C4)(["page-item",{disabled:1===S.currentPage}])},[(0,l.Lk)("a",{class:"page-link",onClick:t[0]||(t[0]=(0,r.D$)((e=>S.currentPage--),["prevent"]))},"Previous")],2),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(S.totalPages,(e=>((0,l.uX)(),(0,l.CE)("li",{class:(0,n.C4)(["page-item",{active:S.currentPage===e}]),key:e},[(0,l.Lk)("a",{class:"page-link",onClick:(0,r.D$)((t=>S.currentPage=e),["prevent"])},(0,n.v_)(e),9,k)],2)))),128)),(0,l.Lk)("li",{class:(0,n.C4)(["page-item",{disabled:S.currentPage===S.totalPages}])},[(0,l.Lk)("a",{class:"page-link",onClick:t[1]||(t[1]=(0,r.D$)((e=>S.currentPage++),["prevent"]))},"Next")],2)])])])]),(0,l.Lk)("div",g,[(0,l.Lk)("div",h,[t[6]||(t[6]=(0,l.Lk)("h3",{class:"text-center"},"Analytics",-1)),(0,l.Lk)("div",m,[S.averageTemperature||S.averageHumidity||S.maxCO2?((0,l.uX)(),(0,l.CE)("div",L,[(0,l.Lk)("div",f,[(0,l.Lk)("div",b,[t[3]||(t[3]=(0,l.Lk)("h5",{class:"card-title"},"Average Temperature (°C)",-1)),(0,l.Lk)("p",y,(0,n.v_)(S.averageTemperature.toFixed(2)),1)])])])):(0,l.Q3)("",!0),(0,l.Lk)("div",C,[(0,l.Lk)("div",_,[(0,l.Lk)("div",x,[t[4]||(t[4]=(0,l.Lk)("h5",{class:"card-title"},"Average Humidity (%)",-1)),(0,l.Lk)("p",O,(0,n.v_)(S.averageHumidity.toFixed(2)),1)])])]),(0,l.Lk)("div",P,[(0,l.Lk)("div",D,[(0,l.Lk)("div",E,[t[5]||(t[5]=(0,l.Lk)("h5",{class:"card-title"},"Maximum CO2 (ppm)",-1)),(0,l.Lk)("p",w,(0,n.v_)(S.maxCO2),1)])])])])]),(0,l.Lk)("div",A,[t[7]||(t[7]=(0,l.Lk)("h3",{class:"text-center"},"CO2 Levels Over Time",-1)),S.co2Data.length>0&&S.timestamps.length>0?((0,l.uX)(),(0,l.Wv)(T,{key:0,co2Data:S.co2Data,timestamps:S.timestamps,class:"",style:{height:"1000px"}},null,8,["co2Data","timestamps"])):(0,l.Q3)("",!0)])])])])}a(4979);var $=a(4373),M=a(144);function T(e,t,a,r,n,c){return(0,l.uX)(),(0,l.CE)("div",null,t[0]||(t[0]=[(0,l.Lk)("canvas",{id:"co2Chart"},null,-1)]))}var j=a(6912);j.t1.register(...j.$L);var B={name:"CO2Chart",props:{co2Data:{type:Array,required:!0},timestamps:{type:Array,required:!0}},setup(e){const t=(0,M.KR)(null);return(0,l.sV)((()=>{const a=document.getElementById("co2Chart").getContext("2d");console.log(e.co2Data),t.value=new j.t1(a,{type:"line",data:{labels:e.timestamps,datasets:[{label:"CO2 Levels (ppm)",data:e.co2Data,borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:2,fill:!0}]},options:{responsive:!0,scales:{x:{title:{display:!0,text:"Time"}},y:{title:{display:!0,text:"CO2 Levels (ppm)"},beginAtZero:!0}}}})})),(0,l.xo)((()=>{t.value&&t.value.destroy()})),{co2Chart:t}}},H=a(1241);const W=(0,H.A)(B,[["render",T]]);var X=W,F={name:"App",components:{CO2Chart:X},setup(){const e="george_dudnik",t="7355608Egor$",a=btoa(`${e}:${t}`),r=(0,M.KR)([]),n=10,c=(0,M.KR)(1),o=async e=>{try{const t=await $.A.get(`https://console.beringar.co.uk/privateapi/device/cache/${e.detail.deviceid}/`,{headers:{Authorization:`Basic ${a}`}});e.deviceCache=t.data}catch(t){console.error("Error fetching device cache:",t)}},s=async()=>{try{const e=await $.A.get("https://console.beringar.co.uk/privateapi/sensorlatest/building/f9d56266-57b2-45ad-b6dc-e1a45d64f0b6/",{headers:{Authorization:`Basic ${a}`}});r.value=e.data,await Promise.all(r.value.map((e=>o(e)))),console.log("All device caches fetched")}catch(e){console.error("Error fetching protected data:",e)}};(0,l.sV)(s);const i=(0,l.EW)((()=>{const e=r.value.map((e=>e.detail.temperature)).filter(Boolean),t=e.reduce(((e,t)=>e+t),0);return t/e.length||0})),d=(0,l.EW)((()=>{const e=r.value.map((e=>e.detail.humid)).filter(Boolean),t=e.reduce(((e,t)=>e+t),0);return t/e.length||0})),u=(0,l.EW)((()=>{const e=r.value.map((e=>e.detail.co2)).filter(Boolean);return Math.max(...e)||0})),p=(0,l.EW)((()=>Math.ceil(r.value.length/n))),v=(0,l.EW)((()=>{const e=(c.value-1)*n,t=e+n;return r.value.slice(e,t)})),k=(0,l.EW)((()=>r.value?r.value.map((e=>e.detail.co2)):[])),g=(0,l.EW)((()=>r.value?r.value.map((e=>h(e.updated))):[])),h=e=>{const t=new Date(e),a=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0"),o=String(t.getSeconds()).padStart(2,"0");return`${a}-${r}-${l} ${n}:${c}:${o}`};return{data:r,currentPage:c,itemsPerPage:n,averageTemperature:i,averageHumidity:d,maxCO2:u,totalPages:p,paginatedData:v,co2Data:k,timestamps:g,formatDate:h}}};const I=(0,H.A)(F,[["render",S]]);var R=I,q=a(5768);const K=(0,r.Ef)(R);K.use(q["default"]),K.use(q.IconsPlugin),K.mount("#app")}},t={};function a(r){var l=t[r];if(void 0!==l)return l.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,r,l,n){if(!r){var c=1/0;for(d=0;d<e.length;d++){r=e[d][0],l=e[d][1],n=e[d][2];for(var o=!0,s=0;s<r.length;s++)(!1&n||c>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[s])}))?r.splice(s--,1):(o=!1,n<c&&(c=n));if(o){e.splice(d--,1);var i=l();void 0!==i&&(t=i)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[r,l,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var l,n,c=r[0],o=r[1],s=r[2],i=0;if(c.some((function(t){return 0!==e[t]}))){for(l in o)a.o(o,l)&&(a.m[l]=o[l]);if(s)var d=s(a)}for(t&&t(r);i<c.length;i++)n=c[i],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(d)},r=self["webpackChunkberingar_analytics"]=self["webpackChunkberingar_analytics"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(8396)}));r=a.O(r)})();
//# sourceMappingURL=app.2179d2db.js.map